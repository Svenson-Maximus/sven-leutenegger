<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sven Leutenegger - The Interactive CV Experience</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* General Styles - New Dark Theme */
        :root {
            --primary-color: #00f0ff; /* Bright Cyan */
            --secondary-color: #f000ff; /* Bright Magenta */
            --background-color: #0a041f; /* Very Dark Indigo */
            --card-bg-color: #1a1035; /* Dark Purple */
            --text-color: #e0e0ff; /* Light Lavender Text */
            --heading-color: #ffffff; /* White Headings */
            --border-color: #381859; /* Dark Purple-ish Border */
            
            /* GoL Cell Colors */
            /* Cyans for Name Reveal */
            --conway-cell-color-active1: #00f0ff; 
            --conway-cell-color-active2: #00e0ff; 
            --conway-cell-color-active3: #30d0ff; 

            /* Blues for Active Burst phase */
            --conway-cell-blue-burst1: #007FFF;  /* Azure */
            --conway-cell-blue-burst2: #1E90FF;  /* DodgerBlue */
            --conway-cell-blue-burst3: #4682B4;  /* SteelBlue */

            /* Subtle Blues for Background phase */
            --conway-cell-blue-subtle1: rgba(0, 127, 255, 0.3);   /* Azure with alpha */
            --conway-cell-blue-subtle2: rgba(30, 144, 255, 0.35); /* DodgerBlue with alpha */
            --conway-cell-blue-subtle3: rgba(70, 130, 180, 0.25); /* SteelBlue with alpha */
            
            --conway-cell-color-loading: #f000ff; /* Magenta for loading bar */
            --conway-cell-color-interactive: #f000ff; /* Magenta for user-drawn interactive cells */
            
            --link-hover-color: #7df9ff; 
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.7; margin: 0; padding: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            overflow-x: hidden;
            transition: background-color 0.5s ease;
        }

        #conwayCanvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; opacity: 1; 
            pointer-events: none; 
            transition: opacity 1.5s ease-out;
        }

        .container {
            width: 90%; max-width: 900px; margin: 40px auto;
            background-color: var(--card-bg-color);
            padding: 30px 40px; border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 240, 255, 0.15), 0 0 15px rgba(240, 0, 255, 0.1);
            position: relative; z-index: 1;
            opacity: 0; 
            transform: translateY(20px);
            transition: opacity 0.7s ease-out, transform 0.7s ease-out;
        }

        .cv-header { padding-bottom: 25px; border-bottom: 3px solid var(--primary-color); margin-bottom: 35px; text-align: center; }
        .cv-header h1 { margin: 10px 0 5px 0; font-size: 2.8em; color: var(--heading-color); font-weight: 700; letter-spacing: -0.5px; text-shadow: 0 0 8px rgba(0, 240, 255, 0.3); }
        .cv-header h1 .char { display: inline-block; opacity: 0; transform: translateY(-20px) scale(0.8); }
        .cv-header .title { margin: 20px 0 20px 0; font-size: 1.4em; font-weight: 300; color: var(--primary-color); }
        .contact-info { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px 20px; }
        .contact-info p { margin: 5px 0; font-size: 0.95em; color: var(--text-color); display: inline-flex; align-items: center; }
        .contact-info i { margin-right: 8px; color: var(--primary-color); font-size: 1.1em; width: 20px; text-align: center; }
        .contact-info a { color: var(--primary-color); text-decoration: none; font-weight: 500; position: relative; }
        .contact-info a::after { content: ''; position: absolute; width: 0; height: 1px; display: block; margin-top: 2px; right: 0; background: var(--secondary-color); transition: width 0.3s ease, background-color 0.3s ease; }
        .contact-info a:hover::after { width: 100%; left: 0; right: auto; background: var(--primary-color); }
        .contact-info a:hover { color: var(--link-hover-color); }

        .cv-section { margin-bottom: 35px; opacity: 0; transform: translateY(30px); }
        .cv-section h2 { font-size: 2em; color: var(--secondary-color); border-bottom: 2px solid var(--border-color); padding-bottom: 12px; margin-bottom: 25px; position: relative; text-shadow: 0 0 5px rgba(240, 0, 255, 0.3); }
        .cv-section h2 .char { display: inline-block; opacity: 0; }
        .cv-section h2 i { margin-right: 12px; color: var(--primary-color); }
        .cv-section h2::before { content: ""; position: absolute; left: 0; bottom: -2px; width: 70px; height: 2px; background-color: var(--primary-color); box-shadow: 0 0 5px var(--primary-color); }

        .cv-entry, .cv-item, .skill-category { margin-bottom: 20px; padding-left: 15px; border-left: 3px solid var(--primary-color); opacity: 0; }
        .cv-entry h3 { font-size: 1.3em; color: var(--primary-color); margin: 0 0 5px 0; }
        .cv-entry h3 a { color: var(--primary-color); text-decoration: none; }
        .cv-entry h3 a:hover { text-decoration: underline; color: var(--link-hover-color); }
        .cv-meta { font-size: 1em; font-style: italic; color: #b0b0cc; margin-bottom: 10px; }
        .cv-section ul { list-style: none; padding-left: 0; margin-top: 8px; }
        .cv-section ul li { margin-bottom: 8px; color: var(--text-color); padding-left: 25px; position: relative; }
        .cv-section ul li::before { content: "\f111"; font-family: "Font Awesome 6 Free"; font-weight: 900; position: absolute; left: 0; top: 1px; color: var(--primary-color); font-size: 0.7em; }
        .cv-item strong { color: var(--secondary-color); font-weight: 600; }
        .cv-item em { color: #c0c0dd; }
        .cv-item .comment { color: #a0a0bb; font-size: 0.9em; font-style: italic; }
        .cv-item a { color: var(--primary-color); text-decoration: none; font-weight: 600; }
        .cv-item a:hover { text-decoration: underline; color: var(--link-hover-color); }

        /* IT Skills specific styling */
        .skill-category h4 { font-size: 1.1em; color: var(--secondary-color); margin-bottom: 8px; }
        .skill-category p { margin: 0; color: var(--text-color); font-size: 0.95em; }


        footer { text-align: center; padding: 25px 0 10px; margin-top: 30px; border-top: 1px solid var(--border-color); font-size: 0.9em; color: #8080a0; }
        footer p { margin-bottom: 5px; }
        .easter-egg { font-size: 0.9em; color: #9090b0; cursor: pointer; transition: color 0.3s, text-shadow 0.3s; }
        .easter-egg:hover { color: var(--secondary-color); text-shadow: 0 0 8px var(--secondary-color); }
        
        .interactive-mode-overlay {
            position: fixed;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.5s ease;
            pointer-events: none;
        }
        #interactiveModeHelp {
            bottom: 20px; left: 50%; transform: translateX(-50%);
            background-color: rgba(26, 16, 53, 0.85); 
            color: var(--text-color); padding: 10px 20px;
            border-radius: 8px; border: 1px solid var(--primary-color);
            font-size: 0.9em; box-shadow: 0 0 15px var(--primary-color);
        }
        #golRulesDisplay {
            top: 20px; left: 20px;
            background-color: rgba(26, 16, 53, 0.75); 
            color: var(--text-color); padding: 15px;
            border-radius: 6px; border: 1px solid var(--secondary-color);
            font-size: 0.85em; max-width: 250px;
            line-height: 1.5;
        }
        #golRulesDisplay h5 { margin-top: 0; color: var(--secondary-color); }
        #golRulesDisplay ul { padding-left: 18px; margin-bottom: 0; }


        .initially-hidden { opacity: 0; }

        @media (max-width: 768px) {
            .container { width: 95%; padding: 20px 25px; margin-top: 20px; }
            .cv-header h1 { font-size: 2.2em; }
            .cv-header .title { font-size: 1.2em; }
            .contact-info { flex-direction: column; align-items: center; gap: 5px; }
            .cv-section h2 { font-size: 1.6em; }
            #golRulesDisplay { font-size: 0.8em; padding: 10px; max-width: 200px; top:10px; left:10px; }
        }
    </style>
</head>
<body>
    <canvas id="conwayCanvas"></canvas>
    <div class="interactive-mode-overlay" id="interactiveModeHelp">
        Click to toggle cells. Hold mouse down to draw. Press <kbd>P</kbd> to Pause/Play (draw when paused). Press <kbd>ESC</kbd> to return to CV.
    </div>
    <div class="interactive-mode-overlay" id="golRulesDisplay">
        <h5>Conway's Game of Life:</h5>
        <ul>
            <li>Birth: Dead cell with 3 live neighbors becomes live.</li>
            <li>Survival: Live cell with 2 or 3 live neighbors stays live.</li>
            <li>Death: Live cell with &lt;2 (loneliness) or &gt;3 (overpopulation) live neighbors dies.</li>
        </ul>
    </div>


    <div class="container">
        <header class="cv-header">
            <h1 class="initially-hidden">Sven Leutenegger</h1>
            <p class="title initially-hidden">M.Sc. Student in Engineering – Computer & Data Science</p>
            <div class="contact-info">
                <p><i class="fas fa-map-marker-alt"></i> Zürich, Switzerland</p>
                <p><i class="fas fa-phone"></i> <a href="tel:+41799567434">+41 79 956 74 34</a></p>
                <p><i class="fas fa-envelope"></i> <a href="mailto:leutenegger.sven@outlook.com">leutenegger.sven@outlook.com</a></p>
                <p><i class="fab fa-github"></i> <a href="https://github.com/Svenson-Maximus" target="_blank">GitHub</a></p>
                <p><i class="fab fa-linkedin"></i> <a href="https://www.linkedin.com/in/sven-leutenegger-381802235/" target="_blank">LinkedIn</a></p>
            </div>
        </header>
        <main>
            <section id="profile" class="cv-section">
                <h2><i class="fas fa-user"></i> Profile</h2>
                <p>Curious and hands-on MSc student in Engineering with a focus on Computer Science and Data Science. With a background in Business Information Systems, I love bridging the gap between people and intelligent systems. I'm deeply interested in AI and Eager to deepen my knowledge and explore amazing real-world applications of AI.</p>
            </section>

            <section id="education" class="cv-section">
                <h2><i class="fas fa-graduation-cap"></i> Education</h2>
                <div class="cv-entry">
                    <h3>M.Sc. in Engineering – Computer and Data Science</h3>
                    <p class="cv-meta">HSLU, Lucerne School of Computer Science and Information Technology | 2024 – Present</p>
                </div>
                <div class="cv-entry">
                    <h3>B.Sc. in Business Information Technology</h3>
                    <p class="cv-meta">ZHAW, School of Management & Law, Winterthur | 2021 – 2024</p>
                </div>
            </section>

            <section id="experience" class="cv-section">
                <h2><i class="fas fa-briefcase"></i> Work Experience</h2>
                <div class="cv-entry">
                    <h3>Research Assistant</h3>
                    <p class="cv-meta">AI Robotics Research Lab, HSLU | 2024 – Present</p>
                    <ul>
                        <li>Developed computer vision modules for object detection in RoboCup (robotics competition).</li>
                        <li>Engineered a digital twin of the RoboCup Logistics League using Siemens Plant Simulation to test and validate complex multi-robot autonomous systems.</li>
                        <li>Implemented exploration algorithms for a team of 3 autonomous robots.</li>
                        <li>Contributed to machine learning model training and system optimization.</li>
                    </ul>
                </div>
                <div class="cv-entry">
                    <h3><a href="https://aris-space.ch/" target="_blank" rel="noopener noreferrer">Head of IT – ARIS – Academic Space Initiative Switzerland</a></h3>
                    <p class="cv-meta">Part-time alongside studies | 2022 – Present</p>
                    <ul>
                        <li>Maintained CentOS servers, internal wiki, NAS backups.</li>
                        <li>Built onboarding automation using Microsoft Power Automate.</li>
                        <li>Managed Microsoft 365 and ENTRA infrastructure.</li>
                        <li>Provided technical support and led internal IT workshops.</li>
                    </ul>
                </div>
                <div class="cv-entry">
                    <h3>Gamemaster (student job)</h3>
                    <p class="cv-meta">EscapeCity | 2022 – 2024</p>
                    <ul>
                        <li>Conducted and managed interactive escape room sessions for groups.</li>
                    </ul>
                </div>
                <div class="cv-entry">
                    <h3>Sergeant – Electronic Warfare (EKF)</h3>
                    <p class="cv-meta">Swiss Military | 2020 – 2021</p>
                    <ul>
                        <li>Led operations with teams of 5–40 personnel.</li>
                        <li>Delivered training on electronic warfare, radio frequencies, and tactical communication systems.</li>
                    </ul>
                </div>
            </section>
            
            <section id="projects" class="cv-section">
                <h2><i class="fas fa-lightbulb"></i> Selected Projects</h2>
                <div class="cv-item">
                    <strong>Semester Project:</strong> <em>Developed Object Detection Model to classify machines from the RoboCup Logistics League.</em> Compared Faster R-CNN and YOLO, trained of different datasets.
                </div>
                <div class="cv-item">
                    <strong>Bachelor Thesis:</strong> <em>Feature Extraction from Video for Stroke Patient Movement Classification.</em> Developed and compared ML models based on Mediapipe keypoints using Python and TensorFlow.
                </div>
                <div class="cv-item">
                    <strong><a href="https://swissmusicawards.ch/" target="_blank" rel="noopener noreferrer">Swiss Music Awards</a>:</strong> Website contribution and development of Voting System. <em>Built with Svelte & JavaScript.</em>
                </div>
                <div class="cv-item">
                    <strong>BLE Tray Finder App:</strong> Mobile app to locate physical items using BLE-connected lights. Tray lights up to indicate the correct location. Built with Kotlin, Jetpack Compose and Bluetooth LE.
                </div>
                <div class="cv-item">
                    <strong>GuessITgame (Java):</strong> Level-based quiz game with Spring Boot backend and Svelte frontend. Used Auth0, MongoDB Atlas, Azure deployment, tested with JUnit and Mockito.
                </div>
                <div class="cv-item">
                    <strong>DnD Chatbot (Python):</strong> AI chatbot for Dungeons & Dragons using GPT-3.5, SQLite backend, web frontend with HTML/CSS.
                </div>
                <div class="cv-item">
                    <strong>Life Expectancy Estimator (Python):</strong> Flask-based AI web app predicting life expectancy using XGBoost and neural networks. Integrated SHAP for explainability.
                </div>
            </section>

            <section id="skills" class="cv-section">
                <h2><i class="fas fa-cogs"></i> IT Skills</h2>
                <div class="skill-category">
                    <h4>Programming Languages</h4>
                    <p>Python, Java, JavaScript, SQL</p>
                </div>
                <div class="skill-category">
                    <h4>Data Science & Machine Learning</h4>
                    <p>PyTorch, TensorFlow, OpenCV, Scikit-learn, Pandas, NumPy, XGBoost</p>
                </div>
                <div class="skill-category">
                    <h4>Web Technologies & Frameworks</h4>
                    <p>Spring Boot, Flask, Svelte, HTML, CSS, REST APIs</p>
                </div>
                <div class="skill-category">
                     <h4>Mobile & Game Development</h4>
                    <p>Flutter, Kotlin (Android), Unity (C#)</p>
                </div>
                 <div class="skill-category">
                    <h4>DevOps & Cloud</h4>
                    <p>Azure, Git, GitHub, Docker, Microsoft 365 Admin, Power Automate, ENTRA ID</p>
                </div>
                <div class="skill-category">
                    <h4>Databases & Tools</h4>
                    <p>MongoDB, SQLite, Siemens Plant Simulation, Agile/Scrum, Auth0, BLE</p>
                </div>
            </section>

            <section id="languages" class="cv-section">
                <h2><i class="fas fa-language"></i> Languages</h2>
                <div class="cv-item">German <span class="comment">(Native)</span></div>
                <div class="cv-item">English <span class="comment">(C1 - Advanced)</span></div>
                <div class="cv-item">French, Spanish <span class="comment">(B2 - Intermediate)</span></div>
            </section>

            <section id="hobbies" class="cv-section">
                <h2><i class="fas fa-dice-d20"></i> Hobbies</h2>
                <div class="cv-item"><strong>Sports:</strong> Running, fitness, Chess</div>
                <div class="cv-item"><strong>Creative:</strong> Dungeon Master for D&D, Drawing</div>
                <div class="cv-item"><strong>Science:</strong> Science enthusiast</div>
            </section>
        </main>
        <footer>
            <p>&copy; <span id="currentYear"></span> Sven Leutenegger. Interactive CV Experience.</p>
            <p class="easter-egg" id="easterEggTrigger">Engage with the cellular automata...</p>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const conwayCanvasEl = document.getElementById('conwayCanvas');
            const ctx = conwayCanvasEl.getContext('2d');
            const containerEl = document.querySelector('.container');
            const interactiveModeHelpEl = document.getElementById('interactiveModeHelp');
            const golRulesDisplayEl = document.getElementById('golRulesDisplay');
            const easterEggTriggerEl = document.getElementById('easterEggTrigger');
            
            let resolution = 12;
            let cols, rows;
            let grid, nextGrid, nameTemplateGrid, loadingBarTemplateGrid;
            let conwayAnimationFrameId;
            let isGameOfLifeRunning = true; 
            let isSimulationPausedInInteractive = false; 
            let isInteractiveMode = false;
            let currentConwayPhase = 'nameReveal'; 
            let nameRevealProgress = 0; 
            const nameRevealDuration = 2000; 
            let loadingIndicatorProgress = 0;
            const loadingIndicatorDuration = 1500; 
            let activeBurstGenerations = 0;
            const maxActiveBurstGenerations = 120; 
            const conwayFPS = 15; 
            const conwayInterval = 1000 / conwayFPS;
            let conwayLastTime = 0;
            let introSequencePromiseResolvers = { name: null, loading: null };

            const activeCellColors = [ 
                getComputedStyle(document.documentElement).getPropertyValue('--conway-cell-color-active1').trim(),
                getComputedStyle(document.documentElement).getPropertyValue('--conway-cell-color-active2').trim(),
                getComputedStyle(document.documentElement).getPropertyValue('--conway-cell-color-active3').trim()
            ];
            const blueBurstCellColors = [
                getComputedStyle(document.documentElement).getPropertyValue('--conway-cell-blue-burst1').trim(),
                getComputedStyle(document.documentElement).getPropertyValue('--conway-cell-blue-burst2').trim(),
                getComputedStyle(document.documentElement).getPropertyValue('--conway-cell-blue-burst3').trim()
            ];
            const blueSubtleCellColors = [
                getComputedStyle(document.documentElement).getPropertyValue('--conway-cell-blue-subtle1').trim(),
                getComputedStyle(document.documentElement).getPropertyValue('--conway-cell-blue-subtle2').trim(),
                getComputedStyle(document.documentElement).getPropertyValue('--conway-cell-blue-subtle3').trim()
            ];
            const loadingCellColor = getComputedStyle(document.documentElement).getPropertyValue('--conway-cell-color-loading').trim();
            const interactiveCellColor = getComputedStyle(document.documentElement).getPropertyValue('--conway-cell-color-interactive').trim();
            
            let isDrawingOnCanvas = false; 
            let initialCellStateOnClick = 0; 

            const letterGlyphs = { 'S':[[0,1,1,1,0],[1,0,0,0,0],[0,1,1,1,0],[0,0,0,0,1],[0,1,1,1,0]],'V':[[1,0,0,0,1],[1,0,0,0,1],[0,1,0,1,0],[0,1,0,1,0],[0,0,1,0,0]],'E':[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,0],[1,0,0,0,0],[1,1,1,1,1]],'N':[[1,0,0,0,1],[1,1,0,0,1],[1,0,1,0,1],[1,0,0,1,1],[1,0,0,0,1]],' ': [[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],'L':[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,1]],'U':[[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],'T':[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],'G':[[0,1,1,1,0],[1,0,0,0,0],[1,0,0,1,1],[1,0,0,0,1],[0,1,1,1,0]],'R':[[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0],[1,0,0,1,0],[1,0,0,0,1]] };
            const glyphHeight = 5; const glyphWidth = 5;

            function setupConway() { conwayCanvasEl.width = window.innerWidth; conwayCanvasEl.height = window.innerHeight; cols = Math.floor(conwayCanvasEl.width / resolution); rows = Math.floor(conwayCanvasEl.height / resolution); grid = make2DArray(cols, rows); nextGrid = make2DArray(cols, rows); nameTemplateGrid = make2DArray(cols, rows); loadingBarTemplateGrid = make2DArray(cols,rows); buildNameTemplate(); buildLoadingBarTemplate(); }
            function make2DArray(c, r) { let arr = new Array(c); for (let i = 0; i < arr.length; i++) arr[i] = new Array(r).fill(0); return arr; }
            function buildNameTemplate() { const nameToDraw = "SVEN LEUTENEGGER"; const totalNameWidthChars = nameToDraw.length * (glyphWidth + 1) - 1; const totalNameHeightChars = glyphHeight; const startCol = Math.floor((cols - totalNameWidthChars) / 2); let startRow = Math.floor((rows - totalNameHeightChars) / 2) - 5; if (startRow < 1) startRow = 1; let currentOffset = 0; for (let char of nameToDraw) { const glyph = letterGlyphs[char.toUpperCase()] || letterGlyphs[' ']; for (let r_idx = 0; r_idx < glyph.length; r_idx++) { for (let c_idx = 0; c_idx < glyph[r_idx].length; c_idx++) { if (glyph[r_idx][c_idx] === 1) { const gridCol = startCol + currentOffset + c_idx; const gridRow = startRow + r_idx; if (gridCol >= 0 && gridCol < cols && gridRow >= 0 && gridRow < rows) nameTemplateGrid[gridCol][gridRow] = 1; } } } currentOffset += glyphWidth + 1; } }
            function buildLoadingBarTemplate() { const barWidthCells = Math.floor(cols / 3); const barHeightCells = 2; const startX = Math.floor((cols - barWidthCells) / 2); let nameBottomRow = 0; for(let r_idx = rows - 1; r_idx >= 0; r_idx--) { for (let c_idx = 0; c_idx < cols; c_idx++) if (nameTemplateGrid[c_idx][r_idx] === 1) { nameBottomRow = r_idx; break; } if (nameBottomRow > 0) break; } const startY = nameBottomRow + 3; for (let c_idx = 0; c_idx < barWidthCells; c_idx++) for (let r_idx = 0; r_idx < barHeightCells; r_idx++) if (startX + c_idx >= 0 && startX + c_idx < cols && startY + r_idx >= 0 && startY + r_idx < rows) loadingBarTemplateGrid[startX + c_idx][startY + r_idx] = 1; }
            function revealNameOnGrid(progress) { for (let i = 0; i < cols; i++) for (let j = 0; j < rows; j++) { const revealThreshold = i / cols; if (nameTemplateGrid[i][j] === 1 && progress > revealThreshold && Math.random() < progress * 1.5) grid[i][j] = 1; } }
            function fillLoadingBarOnGrid(progress) { for (let i = 0; i < cols; i++) for (let j = 0; j < rows; j++) if (loadingBarTemplateGrid[i][j] === 1) { let barStartCol = -1; for(let c_find=0; c_find < cols; c_find++) if(loadingBarTemplateGrid[c_find][j] === 1) {barStartCol = c_find; break;} const barCurrentWidth = Math.floor((i - barStartCol + 1) / (cols / 3) * cols); if (barStartCol !== -1 && barCurrentWidth <= progress * cols) grid[i][j] = 1; } }
            
            function drawConwayGrid() { 
                ctx.clearRect(0, 0, conwayCanvasEl.width, conwayCanvasEl.height); 
                for (let i = 0; i < cols; i++) {
                    for (let j = 0; j < rows; j++) {
                        if (grid[i][j] === 1 || grid[i][j] === 2) { 
                            let cellColorThisIteration; 
                            if (currentConwayPhase === 'nameReveal') {
                                cellColorThisIteration = activeCellColors[Math.floor(Math.random() * activeCellColors.length)];
                            } else if (currentConwayPhase === 'loadingIndicator') {
                                if (loadingBarTemplateGrid[i][j] === 1 && grid[i][j] !== 0) {
                                    cellColorThisIteration = loadingCellColor;
                                } else if (nameTemplateGrid[i][j] === 1 && grid[i][j] !== 0) {
                                    cellColorThisIteration = activeCellColors[Math.floor(Math.random() * activeCellColors.length)];
                                } else if (grid[i][j] !== 0) { 
                                    cellColorThisIteration = activeCellColors[0]; 
                                }
                            } else if (currentConwayPhase === 'activeBurst') {
                                cellColorThisIteration = blueBurstCellColors[Math.floor(Math.random() * blueBurstCellColors.length)];
                            } else if (currentConwayPhase === 'subtleBackground') {
                                cellColorThisIteration = blueSubtleCellColors[Math.floor(Math.random() * blueSubtleCellColors.length)];
                            } else if (currentConwayPhase === 'interactive') {
                                if (grid[i][j] === 2) { 
                                    cellColorThisIteration = interactiveCellColor;
                                } else { 
                                    cellColorThisIteration = blueBurstCellColors[0]; 
                                }
                            } else { 
                                cellColorThisIteration = blueSubtleCellColors[0]; 
                            }
                            if (cellColorThisIteration) { 
                                ctx.fillStyle = cellColorThisIteration; 
                                ctx.fillRect(i * resolution, j * resolution, resolution - 1, resolution - 1); 
                            }
                        }
                    }
                }
            }

            function countConwayNeighbors(g, x, y) { let sum = 0; for (let i = -1; i < 2; i++) for (let j = -1; j < 2; j++) { if (i === 0 && j === 0) continue; let col = (x + i + cols) % cols; let row = (y + j + rows) % rows; if (g[col][row] === 1 || g[col][row] === 2) sum++; } return sum; }
            function computeNextConwayGeneration() { for (let i = 0; i < cols; i++) for (let j = 0; j < rows; j++) { let state = grid[i][j]; let liveState = (state === 1 || state === 2) ? 1 : 0; let neighbors = countConwayNeighbors(grid, i, j); if (liveState === 0 && neighbors === 3) nextGrid[i][j] = 1; else if (liveState === 1 && (neighbors < 2 || neighbors > 3)) nextGrid[i][j] = 0; else nextGrid[i][j] = state; } [grid, nextGrid] = [nextGrid, grid];}

            function conwayGameLoop(timestamp) {
                if (!isGameOfLifeRunning && currentConwayPhase !== 'nameReveal' && currentConwayPhase !== 'loadingIndicator') {
                    if (currentConwayPhase === 'interactive' && isSimulationPausedInInteractive) { }
                    conwayAnimationFrameId = requestAnimationFrame(conwayGameLoop);
                    return; 
                }
                const elapsed = timestamp - conwayLastTime;
                if (elapsed > conwayInterval) {
                    conwayLastTime = timestamp - (elapsed % conwayInterval);
                    if (currentConwayPhase === 'nameReveal') {
                        nameRevealProgress += conwayInterval / nameRevealDuration;
                        nameRevealProgress = Math.min(1, nameRevealProgress);
                        revealNameOnGrid(nameRevealProgress);
                        if(nameRevealProgress >= 1 && introSequencePromiseResolvers.name) { 
                            introSequencePromiseResolvers.name(); 
                            introSequencePromiseResolvers.name = null; 
                        }
                    } else if (currentConwayPhase === 'loadingIndicator') {
                        loadingIndicatorProgress += conwayInterval / loadingIndicatorDuration;
                        loadingIndicatorProgress = Math.min(1, loadingIndicatorProgress);
                        fillLoadingBarOnGrid(loadingIndicatorProgress);
                        if(loadingIndicatorProgress >= 1 && introSequencePromiseResolvers.loading) { 
                            introSequencePromiseResolvers.loading(); 
                            introSequencePromiseResolvers.loading = null; 
                        }
                    } else if (currentConwayPhase === 'activeBurst') {
                        computeNextConwayGeneration(); 
                        activeBurstGenerations++;
                        if (activeBurstGenerations >= maxActiveBurstGenerations) {
                            currentConwayPhase = 'subtleBackground';
                            conwayCanvasEl.style.opacity = '1'; 
                        }
                    } else if (currentConwayPhase === 'subtleBackground') {
                        computeNextConwayGeneration();
                    } else if (currentConwayPhase === 'interactive' && !isSimulationPausedInInteractive) {
                        computeNextConwayGeneration();
                    }
                    drawConwayGrid(); 
                }
                conwayAnimationFrameId = requestAnimationFrame(conwayGameLoop);
            }
            
            function toggleInteractiveMode() { 
                isInteractiveMode = !isInteractiveMode; 
                isSimulationPausedInInteractive = false; 
                isDrawingOnCanvas = false;
                if (isInteractiveMode) { 
                    currentConwayPhase = 'interactive'; 
                    containerEl.style.opacity = '0'; containerEl.style.pointerEvents = 'none'; 
                    conwayCanvasEl.style.opacity = '1'; conwayCanvasEl.style.zIndex = '5'; conwayCanvasEl.style.pointerEvents = 'auto'; 
                    document.body.style.backgroundColor = 'var(--background-color)'; 
                    interactiveModeHelpEl.style.opacity = '1'; interactiveModeHelpEl.style.pointerEvents = 'auto';
                    golRulesDisplayEl.style.opacity = '1'; golRulesDisplayEl.style.pointerEvents = 'auto';
                    conwayCanvasEl.addEventListener('mousedown', handleCanvasMouseDown);
                    conwayCanvasEl.addEventListener('mousemove', handleCanvasMouseMove);
                    window.addEventListener('mouseup', handleCanvasMouseUp); 
                    window.addEventListener('keydown', handleInteractiveKeys); 
                } else { 
                    currentConwayPhase = 'subtleBackground'; 
                    containerEl.style.opacity = '1'; containerEl.style.pointerEvents = 'auto'; 
                    conwayCanvasEl.style.opacity = '1'; 
                    conwayCanvasEl.style.zIndex = '-1'; conwayCanvasEl.style.pointerEvents = 'none'; 
                    interactiveModeHelpEl.style.opacity = '0'; interactiveModeHelpEl.style.pointerEvents = 'none'; 
                    golRulesDisplayEl.style.opacity = '0'; golRulesDisplayEl.style.pointerEvents = 'none';
                    conwayCanvasEl.removeEventListener('mousedown', handleCanvasMouseDown);
                    conwayCanvasEl.removeEventListener('mousemove', handleCanvasMouseMove);
                    window.removeEventListener('mouseup', handleCanvasMouseUp);
                    window.removeEventListener('keydown', handleInteractiveKeys); 
                } 
            }

            function setCellAt(col, row, state) {
                 if (col >= 0 && col < cols && row >= 0 && row < rows) {
                    if (grid[col][row] !== state) {
                        grid[col][row] = state;
                        if (isInteractiveMode && (isSimulationPausedInInteractive || !isDrawingOnCanvas)) { 
                            drawConwayGrid();
                        }
                    }
                }
            }

            function handleCanvasMouseDown(event) {
                if (event.button !== 0 || !isInteractiveMode) return; 
                isDrawingOnCanvas = true;
                const rect = conwayCanvasEl.getBoundingClientRect();
                const x = event.clientX - rect.left;
                const y = event.clientY - rect.top;
                const col = Math.floor(x / resolution);
                const row = Math.floor(y / resolution);

                if (col >= 0 && col < cols && row >= 0 && row < rows) {
                    initialCellStateOnClick = (grid[col][row] === 0 || grid[col][row] === undefined) ? 2 : 0; 
                    setCellAt(col, row, initialCellStateOnClick);
                }
            }

            function handleCanvasMouseMove(event) {
                if (!isInteractiveMode || !isDrawingOnCanvas) return;
                const rect = conwayCanvasEl.getBoundingClientRect();
                const x = event.clientX - rect.left;
                const y = event.clientY - rect.top;
                const col = Math.floor(x / resolution);
                const row = Math.floor(y / resolution);
                setCellAt(col, row, initialCellStateOnClick);
                 if (isInteractiveMode && isSimulationPausedInInteractive) { 
                    drawConwayGrid();
                }
            }

            function handleCanvasMouseUp(event) {
                if (event.button !== 0) return;
                isDrawingOnCanvas = false;
                 if (isInteractiveMode && (isSimulationPausedInInteractive || currentConwayPhase === 'interactive')) { 
                    drawConwayGrid();
                }
            }
            
            function handleInteractiveKeys(event) { 
                if (isInteractiveMode) {
                    if (event.key === 'Escape') { 
                        toggleInteractiveMode(); 
                    } else if (event.key === 'p' || event.key === 'P') {
                        isSimulationPausedInInteractive = !isSimulationPausedInInteractive;
                        console.log(isSimulationPausedInInteractive ? "GoL Paused" : "GoL Playing");
                        if (!isSimulationPausedInInteractive) { 
                             isGameOfLifeRunning = true; 
                             conwayLastTime = performance.now(); 
                        } else {
                             isGameOfLifeRunning = false; 
                             drawConwayGrid(); 
                        }
                    }
                }
            }
            
            document.addEventListener('click', function(event) {
                if (isInteractiveMode) return; 
                if (easterEggTriggerEl.contains(event.target)) return; 
                if (!containerEl.contains(event.target)) { 
                    toggleInteractiveMode();
                }
            });

            setupConway();
            conwayAnimationFrameId = requestAnimationFrame(conwayGameLoop);
            easterEggTriggerEl.addEventListener('click', toggleInteractiveMode);

            document.getElementById('currentYear').textContent = new Date().getFullYear();
            function splitTextIntoChars(selector) { const element = document.querySelector(selector); if(element) {element.innerHTML = element.textContent.replace(/\S/g, "<span class='char'>$&</span>"); return element.querySelectorAll('.char');} return []; }
            
            async function startIntroSequence() {
                await new Promise(resolve => { introSequencePromiseResolvers.name = resolve; });
                currentConwayPhase = 'loadingIndicator';
                await new Promise(resolve => { introSequencePromiseResolvers.loading = resolve; });
                await new Promise(resolve => setTimeout(resolve, 300)); 
            
                currentConwayPhase = 'activeBurst';
                activeBurstGenerations = 0; 
                conwayCanvasEl.style.opacity = '1';
            
                await new Promise(resolve => setTimeout(resolve, 2000)); // 2-second GOL burst
            
                const mainTitleEl = document.querySelector('.cv-header h1');
                const subTitleEl = document.querySelector('.cv-header .title');
                mainTitleEl.classList.remove('initially-hidden');
                subTitleEl.classList.remove('initially-hidden');
                const mainTitleChars = splitTextIntoChars('.cv-header h1');
            
                anime({
                    targets: containerEl,
                    opacity: [0, 1],
                    translateY: ['20px', 0],
                    duration: 1200,
                    easing: 'easeOutQuint',
                    complete: () => {
                        activateScrollAnimations();
                    }
                });
            
                const headerTimeline = anime.timeline({ easing: 'easeOutExpo' });
            
                headerTimeline
                    .add({
                        targets: mainTitleChars,
                        translateY: ['-0.5em', 0],
                        opacity: [0, 1],
                        scale: [0.8, 1],
                        duration: 800,
                        delay: anime.stagger(50, { from: 'center' }),
                    })
                    .add({
                        targets: subTitleEl,
                        opacity: [0, 1],
                        translateY: ['1em', 0],
                        duration: 800,
                    }, '-=700');
            }

            function activateScrollAnimations() { const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 }; const sectionObserver = new IntersectionObserver((entries, observer) => { entries.forEach(entry => { if (entry.isIntersecting) { const section = entry.target; section.querySelectorAll('.initially-hidden').forEach(el => el.classList.remove('initially-hidden')); const sectionTitle = section.querySelector('h2'); const sectionItems = section.querySelectorAll('.cv-entry, .cv-item, .skill-category, li, section > p'); anime({ targets: section, opacity: [0, 1], translateY: [30, 0], duration: 800, easing: 'easeOutExpo', begin: () => section.style.opacity = 1 }); if (sectionTitle && !sectionTitle.classList.contains('title-animated')) { sectionTitle.classList.add('title-animated'); const iconHTML = sectionTitle.querySelector('i') ? sectionTitle.querySelector('i').outerHTML : ''; const textContent = sectionTitle.textContent.replace(sectionTitle.querySelector('i')?.textContent || '', '').trim(); sectionTitle.innerHTML = `${iconHTML} ${textContent.replace(/\S/g, "<span class='char'>$&</span>")}`; anime({ targets: sectionTitle.querySelectorAll('.char'), opacity: [0,1], translateX: [-10, 0], scale: [0.8, 1], duration: 500, delay: anime.stagger(30, {start: 200}), easing: 'easeOutCirc' }); } anime({ targets: sectionItems, opacity: [0, 1], translateY: [20, 0], duration: 600, delay: anime.stagger(100, {start: sectionTitle ? 400 : 100}), easing: 'easeOutSine' }); observer.unobserve(section); } }); }, observerOptions); document.querySelectorAll('.cv-section').forEach(section => { sectionObserver.observe(section); }); }
            
            startIntroSequence();
        });
    </script>
</body>
</html>